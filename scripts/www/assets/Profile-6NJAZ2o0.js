import{o as e,G as t,p as s,q as r,x as a,O as o,P as l,C as n,r as i,c,E as d}from"./vue-vendor-DsBWIAOi.js";import{u}from"./useToast-BxM8ikBu.js";import{_ as v}from"./index-BTSs0mnw.js";const x={class:"profile-page fade-in"},p={class:"px-4 py-6 bg-gradient-to-r from-primary-600 to-primary-700"},h={class:"flex items-center space-x-4"},m={class:"flex-1 text-white"},g={class:"text-xl font-bold"},f={class:"text-sm text-primary-200 mt-1"},y={class:"px-4 py-4 -mt-4"},w={class:"bg-white rounded-xl shadow-sm overflow-hidden"},k={class:"flex items-center space-x-3"},b={class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},M=["d"],S={class:"text-sm text-gray-900"},j={class:"px-4 py-2"},z={class:"bg-white rounded-xl shadow-sm overflow-hidden"},B={class:"flex items-center space-x-3"},C={class:"text-sm text-gray-900"},I={class:"text-xs text-gray-500"},O={class:"flex items-center justify-between px-4 py-4"},_={class:"text-xs text-gray-500"},H={class:"text-center pb-8"},P={class:"text-xs text-gray-400 mt-1"},V=v({__name:"Profile",setup(v){const V=d(),A=u(),E=i(null),X=i("1.0.0"),q=i("0 MB"),D=i(!1);function F(){try{let e=0;for(let s in localStorage)localStorage.hasOwnProperty(s)&&(e+=localStorage[s].length+s.length);for(let s in sessionStorage)sessionStorage.hasOwnProperty(s)&&(e+=sessionStorage[s].length+s.length);const t=(e/1024/1024).toFixed(2);q.value=`${t} MB`}catch(e){q.value="未知"}}e(()=>{const e=localStorage.getItem("user");e&&(E.value=JSON.parse(e)),F()});const G=c(()=>{if(!E.value)return"";return{admin:"县级管理员",town:"乡镇管理员",user:"普通用户"}[E.value.role]||"未知角色"});function J(){confirm("确定要退出登录吗？")&&(localStorage.removeItem("user"),A.success("已退出登录"),V.push("/login"))}function N(){if(!D.value&&confirm("确定要清理所有缓存吗？这将删除临时数据但不会删除登录信息。")){D.value=!0;try{const e=localStorage.getItem("user"),t=["user"];Object.keys(localStorage).forEach(e=>{t.includes(e)||localStorage.removeItem(e)}),sessionStorage.clear(),window.indexedDB,e&&localStorage.setItem("user",e),F(),A.success("缓存已清理")}catch(e){A.error("清理缓存失败，请重试")}finally{D.value=!1}}}const T=[{icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",title:"个人信息",route:""},{icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",title:"修改密码",route:""},{icon:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",title:"使用帮助",route:""},{icon:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z",title:"关于我们",route:""}];return(e,i)=>{var c;return t(),s("div",x,[r("div",p,[r("div",h,[i[0]||(i[0]=r("div",{class:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg"},[r("svg",{class:"w-10 h-10 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),r("div",m,[r("h2",g,a((null==(c=E.value)?void 0:c.username)||"未知用户"),1),r("p",f,a(G.value),1)])])]),r("div",y,[r("div",w,[(t(),s(o,null,l(T,(e,o)=>r("div",{key:o,class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 last:border-0 active:bg-gray-50 cursor-pointer"},[r("div",k,[(t(),s("svg",b,[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:e.icon},null,8,M)])),r("span",S,a(e.title),1)]),i[1]||(i[1]=r("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])),64))])]),r("div",j,[r("div",z,[r("div",{onClick:N,class:n(["flex items-center justify-between px-4 py-4 border-b border-gray-100 active:bg-gray-50 cursor-pointer",{"opacity-50":D.value}])},[r("div",B,[i[2]||(i[2]=r("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),r("span",C,a(D.value?"清理中...":"清理缓存"),1)]),r("span",I,a(q.value),1)],2),r("div",O,[i[3]||(i[3]=r("div",{class:"flex items-center space-x-3"},[r("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),r("span",{class:"text-sm text-gray-900"},"版本信息")],-1)),r("span",_,"v"+a(X.value),1)])])]),r("div",{class:"px-4 py-4"},[r("button",{onClick:J,class:"w-full py-3 bg-white text-red-600 rounded-xl shadow-sm font-medium hover:bg-red-50 transition-colors"}," 退出登录 ")]),r("div",H,[i[4]||(i[4]=r("p",{class:"text-xs text-gray-500"},"© 2025 XX县防汛抗旱指挥部",-1)),r("p",P,"技术支持: 防汛抗旱应急指挥平台 v"+a(X.value),1)])])}}},[["__scopeId","data-v-870520a9"]]);export{V as default};
