var e=(e,t,a)=>new Promise((s,r)=>{var l=e=>{try{i(a.next(e))}catch(t){r(t)}},n=e=>{try{i(a.throw(e))}catch(t){r(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(l,n);i((a=a.apply(e,t)).next())});import{m as t}from"./mock-LZpIbfPd.js";import{_ as a}from"./index-BTSs0mnw.js";import{o as s,G as r,p as l,q as n,x as i,A as o,O as d,P as c,r as u,c as x,C as y}from"./vue-vendor-DsBWIAOi.js";const v={class:"notifications-page fade-in"},p={class:"px-4 py-3 bg-white border-b border-gray-200"},f={class:"flex items-center justify-between"},m={key:0,class:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium"},b={class:"px-4 py-4"},h={key:0,class:"space-y-3"},g={key:1,class:"text-center py-12"},k={key:2,class:"space-y-3"},w=["onClick"],j={class:"flex items-start space-x-3"},M=["d"],C={class:"flex-1"},_={class:"flex items-start justify-between mb-1"},H={key:0,class:"w-2 h-2 bg-primary-600 rounded-full flex-shrink-0 ml-2"},N={class:"text-sm text-gray-600 mb-2"},P={class:"flex items-center justify-between"},z={class:"text-xs text-gray-500"},A=a({__name:"Notifications",setup(a){const A=u([]),B=u(!0);s(()=>e(null,null,function*(){try{const e=yield t.getNotifications();A.value=e.data}catch(e){}finally{B.value=!1}}));const L=x(()=>A.value.filter(e=>!e.read).length);function V(e){const t={warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",task:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"};return t[e]||t.info}function q(e){const t={warning:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200"},info:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200"},task:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-200"}};return t[e]||t.info}return(a,s)=>(r(),l("div",v,[n("div",p,[n("div",f,[s[0]||(s[0]=n("h1",{class:"text-lg font-bold text-gray-900"},"消息通知",-1)),L.value>0?(r(),l("div",m,i(L.value)+" 条未读 ",1)):o("",!0)])]),n("div",b,[B.value?(r(),l("div",h,[(r(),l(d,null,c(3,e=>n("div",{key:e,class:"animate-pulse bg-white p-4 rounded-xl"},[...s[1]||(s[1]=[n("div",{class:"h-4 bg-gray-200 rounded"},null,-1),n("div",{class:"h-4 bg-gray-200 rounded w-3/4 mt-2"},null,-1)])])),64))])):0===A.value.length?(r(),l("div",g,[...s[2]||(s[2]=[n("svg",{class:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),n("p",{class:"text-sm text-gray-500"},"暂无通知",-1)])])):(r(),l("div",k,[(r(!0),l(d,null,c(A.value,a=>(r(),l("div",{key:a.id,onClick:s=>!a.read&&function(a){return e(this,null,function*(){try{yield t.markNotificationRead(a);const e=A.value.find(e=>e.id===a);e&&(e.read=!0)}catch(e){}})}(a.id),class:y(["bg-white p-4 rounded-xl shadow-sm transition-all cursor-pointer",a.read?"":"border-l-4 border-primary-600",q(a.type).border])},[n("div",j,[n("div",{class:y(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",q(a.type).bg])},[(r(),l("svg",{class:y(["w-5 h-5",q(a.type).text]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:V(a.type)},null,8,M)],2))],2),n("div",C,[n("div",_,[n("h3",{class:y(["text-sm font-medium",a.read?"text-gray-600":"text-gray-900"])},i(a.title),3),a.read?o("",!0):(r(),l("span",H))]),n("p",N,i(a.content),1),n("div",P,[n("span",z,i(a.time),1),n("span",{class:y(["text-xs px-2 py-1 rounded-full",a.read?"bg-gray-100 text-gray-600":"bg-primary-100 text-primary-700"])},i(a.read?"已读":"未读"),3)])])])],10,w))),128))]))])]))}},[["__scopeId","data-v-1ed2ccad"]]);export{A as default};
